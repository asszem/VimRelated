"aVIMRC beállítások 2.3 [2012.11.11. vasárnap | 11:30:27]
"============================================================================================================
"						MAPLEADER BEÁLLÍTÁSOK
"============================================================================================================
	let mapleader=","
"============================================================================================================
"						Plugin beállítások
"============================================================================================================
"Pathogen plugin 
	set nocp
	call pathogen#infect('c:\vimroot\bundle')
	syntax on
	filetype plugin indent on
	filetype indent off
"Nerdtree plugin
	let NERDTreeShowBookmarks = 1
	let NerdTreeChDirMode=2 "make sure the working directory is set correctly
	nnoremap <Leader>n :NERDTree<cr>
	nnoremap <Leader>nf :NERDTreeFind<cr>
	nnoremap <Leader>nt :NERDTreeToggle<cr>
"CtrlP plugin
	"CTRLP plugin Contrlo-P-re az MRU nézetet nyissa meg
		nnoremap <c-p> :CtrlPMRUFiles<cr>
		let g:ctrlp_cmd = 'CtrlPMRUFiles'
	"CtrlP plugin MostRecentUsed nézetben megnyitása
		nnoremap <leader>pm :CtrlPMRUFiles<cr>
	"CtrlP plugin Files nézetben megnyitása
		nnoremap <leader>pf :CtrlPMRUFiles<cr>
	"CtrlP plugin Buffers nézetben megnyitása
		nnoremap <leader>pb :CtrlPBuffer<cr>
		nnoremap <c-b> :CtrlPBuffer<cr>
	"Ctrlp plugin BookmarkDir nézetben nyitás
		nnoremap <leader>pbd :CtrlPBookmarkDir<cr>
"============================================================================================================
"						Gyári beállítások
"============================================================================================================
	"set nocompatible
	source $VIMRUNTIME/vimrc_example.vim
	source $VIMRUNTIME/mswin.vim
	behave mswin
	set diffexpr=MyDiff()
	function MyDiff()
	  let opt = '-a --binary '
	  if &diffopt =~ 'icase' | let opt = opt . '-i ' | endif
	  if &diffopt =~ 'iwhite' | let opt = opt . '-b ' | endif
	  let arg1 = v:fname_in
	  if arg1 =~ ' ' | let arg1 = '"' . arg1 . '"' | endif
	  let arg2 = v:fname_new
	  if arg2 =~ ' ' | let arg2 = '"' . arg2 . '"' | endif
	  let arg3 = v:fname_out
	  if arg3 =~ ' ' | let arg3 = '"' . arg3 . '"' | endif
	  let eq = ''
	  if $VIMRUNTIME =~ ' '
	    if &sh =~ '\<cmd'
	      let cmd = '""' . $VIMRUNTIME . '\diff"'
	      let eq = '"'
	    else
	      let cmd = substitute($VIMRUNTIME, ' ', '" ', '') . '\diff"'
	    endif
	  else
	    let cmd = $VIMRUNTIME . '\diff'
	  endif
	  silent execute '!' . cmd . ' ' . opt . arg1 . ' ' . arg2 . ' > ' . arg3 . eq
	endfunction
"============================================================================================================
"						WILDMENU beállítások
"============================================================================================================
	"Ha van lehetõség, akkor menüben mutatja meg a TAB utáni autocomplete lehetõségeket
		set wildmenu 
	"A wildmode-ban kiírja a lehetõségeket is függõleges menüben
		"A longest azt csinálja, hogy csak az elsõ ambiguitásig egészíti ki
		"Vesszõ után a full pedig a második tabra már teljesen
		"kiegészíti
		set wildmode=list:longest,full
"============================================================================================================
"				FILE, BACKUP, MAPPA BEÁLLÍTÁSOK	
"============================================================================================================
	"Ide rakja a backupot, swap file-t pedig ne csináljon
		set nobackup
		set noswapfile
	"Mentés nélkül is lehessen buffert váltani
		set hidden 
	"A mappaváltással a PWD is automatikusan változik
		set autochdir
		noremap <leader>cdoff :set noautochdir<cr>
	"Karakterkódolás beállítása
		set encoding=utf-8
	"Az aktuális fájl mappátját állítja be PWD-nek
	  	nnoremap <Leader>cd :cd %:h<bar>pwd<cr>
	" Reload file if it's modified outside
		set autoread
		set autowrite
"============================================================================================================
"						KERESÉSI és SUBSTITUTE BEÁLLÍTÁSOK
"============================================================================================================
	"Substitute kezdése egyszerûbben, automatikusan kieszképelve minden regexet
		nnoremap <leader>s :%s,\v
	"Keresés ne legyen betûérzékeny
		set ignorecase 
	"Ha csak kisbetûvel keresek, nem érzékeny, ha van benne nagybetû is, akkor igen.
		set smartcase 
	"Ha zárójelet nyitok, akkor egy pillanatra átugrik (a végére is), amikor bezártam
		set showmatch 
	"A keresési eredményeket már a keresés közben is mutatja a háttér kiemelésével
		set hlsearch 
	"Kiszedi a keresés kiemelését
		noremap <leader><space> :noh<cr>:call clearmatches()<cr>
	"Space-re keres elõre, C-Space-re visszafelé, regexek very magicre állítva
		noremap <Space> /\v
		noremap <C-Space> ?\v
	" Keep search matches in the middle of the window and pulse the line when moving to them.
		nnoremap n nzzzv
		nnoremap N Nzzzv
	" Ugyanúgy automatikusan középre zoomol elõzõ-következõ change-re ugrásnál is
	" Valamint felcseréli az elõre-hátra haladást, az elõzõ változtatás lesz a g,
		nnoremap g; g,zz
		nnoremap g, g;zz
"============================================================================================================
"						GUI beállítások
"============================================================================================================
	"Beállítja a morning színsémát, az általam testreszabott státuszsorral
		:color peachpuff 
		:highlight statusline gui=NONE guibg=Orange guifg=Black
	"Státusz line variációk
		"set statusline=%<%F%h%m%r%h%w%y\ %{&ff}\ %{strftime(\"%c\",getftime(expand(\"%:p\")))}%=\ lin:%l\,%L\ col:%c%V\ pos:%o\ ascii:%b\ %P
		"set statusline=%<%F%h%m%r%h%w%y\ [FORMAT=%{&ff}]\ %{strftime(\"%c\",getftime(expand(\"%:p\")))}%=\ lin:%l\,%L\ col:%c%V\ pos:%o\ ascii:%b\ %P
		"set statusline=%F%m%r%h%w\ [FORMAT=%{&ff}]\ [TYPE=%Y]\ [POS=%l,%v][%p%%]\ %{strftime(\"%y.%m.%d\ -\ %H:%M:%S\")}
		"saját barkácsolás
		set statusline=[%-n]\ %<%t%m%r%w%y\ %=\ Lin[%l\/%L]\ Col[%c%V]\ File[%F]\ Date[%{strftime(\"%y.%m.%d.\|%H:%M\",getftime(expand(\"%:p\")))}]\ %P
	"A menük eltüntetése, csak a tab marad meg
		set guioptions=ae
		"set go-=T 
	"A tabokban csak a fájlnév, ne a path jelenjen meg
		set guitablabel=%t
	"Sortörést állítja be (jobb oldalon nem megy ki margóig a szöveg)
		set linebreak 
	"Kicsit szellõsebb sorokat állít be.
		set linespace=5 
	"Beállítja, hogy mindig max képernyõn nyíljon meg a VIM
		set lines=999 columns=999 
	"Mindig mutasson státuszsort
		set laststatus=2 
	"Beállítja, a softtabok értékét 8-re
		set shiftwidth=4
		set tabstop=4
	"Beállítja, hogy a tabok is a shiftwidth értéke szerint menjenek
		set smarttab
	"Automatikuisan behúzza a sorokat.
		set autoindent 
	"Mindidg legyen sorszámozás
		set number 
	"Relative line number
		"set rnu 
	"Mutatja hol a kurzor
		set cursorline 
	"14 space-t szúr be shobreak után
		let &showbreak=repeat(' ', 14) 
	" New split window on the right
		set splitright
	" New split window on the bottom
		set splitbelow
	" Scrollozásnál ennyi sort mindig mutat képernyõ tetejébõl-aljából-oldalából
		set scrolloff=5
		set sidescroll=1
		set sidescrolloff=10
"============================================================================================================
"					KURZORMOZGATÁS, SZERKESZTLÉS MAPPINGEK
"============================================================================================================
	"ESC gomb átmappolása
		imap ii <Esc>
	"Shift-space: save all
		nnoremap <S-Space> :wa!<cr>
	"ENTER-re a képernyõ közepére igazítja az aktuális sort
		nnoremap <cr> zvzz
	"Kurzormozgatás átmappolása
		noremap j gj
		noremap k gk
		noremap gj j
		noremap gk k
	"Sor elejére és végére ugrás átmappingolása
		noremap H ^
		noremap L $
	"Lefelé scrollozás CTRL-s gombra, mert Windowsban a CTRL-y foglalt a lefelé scrollozásra,
		noremap <C-s> <C-y>
	"Insert módban autocomplete egyszerûsítés
	"Teljes sor kiegészítés
		inoremap <c-l> <c-x><c-l>
	"Fájlkiegészítés
		inoremap <c-f> <c-x><c-f>
	"Insert módban is lehessen sorok között mozogni
		inoremap <C-j> <up>
		inoremap <C-k> <down>
	"Insert módban így egészíti ki
		set completeopt=longest,menuone,preview
	"Gundo toggle átmappolása
		noremap U :GundoToggle<cr>
	"Dokumentum aljára ugrás
		nnoremap <Leader>g G<cr>
	"marks-ra ugrás
		nnoremap <Leader>m '
	"marksok mutatása
		nnoremap <Leader>ma :marks<cr>
"============================================================================================================
"						TAB és WINDOWS ABLAK KEZELÉS
"============================================================================================================
	"Tabkezeléshez tabváltás balra-jobbra CTRL H és L gombokkal, illetve "CTRL balra és jobbra nyilakkal
		noremap <C-l> gt
		noremap <C-h> gT
		nnoremap <C-left> gT
		nnoremap <C-right> gt
	"Windowskezelés, normál módban kurzor billentyûk az ablakok között váltogatnak
		nnoremap <left> <C-w>h 
		nnoremap <right> <C-w>l
		nnoremap <down> <C-w>j
		nnoremap <up> <C-w>k
		noremap <C-j> <C-w>j
		noremap <C-k> <C-w>k
	"A TAB gomb normál módban az ablakok között váltogat
		nnoremap <tab> <c-w>w
		nnoremap <s-tab> <c-w>W
	"Ablakkezelés mapleaderekkel
		nnoremap <Leader>h <C-w>h
		nnoremap <Leader>l <C-w>l
		nnoremap <Leader>j <C-w>j
		nnoremap <Leader>k <C-w>k
	" Window resizing
		nnoremap <S-C-left> 5<c-w>>
		nnoremap <S-C-right> 5<c-w><
		nnoremap <S-C-up> 5<c-w>+
		nnoremap <S-C-down> 5<c-w>-
	"Minden ablakváltáskor ment egyet.
		au FocusLost * :wa 
	"Mindig mentse az aktuális view-t a fájlhoz -> kikapcsoltam, mert sok hibát dobott.
		"au BufWinLeave * mkview
		"au BufWinEnter * silent loadview
	"Az új split mindig jobbra és lent nyíljon.
		set splitright
		set splitbelow
"============================================================================================================
"						FUNKCIÓ BILLENTYÛ MAPPINGEK
"============================================================================================================
	"Buffer kilistázás és belépés választás módba
		nnoremap <f1> :ls<cr>:b 
		" ,bl buffers-list kombóra is beállítom, meglátjuk idõvel
		" melyiket lesz kényelmesebb használni
		nnoremap <Leader>bl :ls!<cr>:b 
	"Alternatív (elõzõleg megnyitott) buferre vált
		nnoremap <F2> :b#<cr>
	"Bufferek között vált F4-F3-ra
		nnoremap <F4> :bnext <CR>
		nnoremap <F3> :bprevious<CR>
	"Minden nyitott buffert elment 
		"map <F5> :wa! <bar> mkview <cr>
		map <F5> :wa!<cr>
	"Minden tabot elment egy "sessionsave" nevû file-ba.
		map <F6> :mksession! c:\vimroot\sessionsave<cr>
		map <F9> :so c:\vimroot\sessionsave <cr>
"============================================================================================================
"						EGYÉB BEÁLLÍTÁSOK
"============================================================================================================
	"Ez a helpben fontos, eredetilega  CTRL-G az az aktulis fájl infoit mutatja.
		noremap <C-g> <C-]>
	"Timestamp beállítások
		nmap <leader>ts A<C-R>=strftime(" [%m.%d. %H:%M:%S]")<CR><Esc>
		nmap <leader>tl A<C-R>=strftime(" [%Y.%m.%d. %A \| %H:%M:%S]")<CR><Esc>
		nmap <leader>td O<C-R>=strftime("%Y.%m.%d.")<CR><Esc>
		"Az aktuális pozíciótól törli a tartalmat és új timestampot
		"szúr be (timestamp long UPDATE)
		nmap <leader>tlu C<C-R>=strftime("[%Y.%m.%d. %A \| %H:%M:%S]")<CR><Esc>
	"ToDo listhez 
		" ,d a sor elejét +ra alakítja (DONE)
		" ,dd a sor elejét !-ra alakítja ("Don'tDone")
		nmap <leader>d :s,\(^\s*\)!,\1+,e<cr>:noh<cr>
		set magic
		nmap <leader>dd :s,\(^\s*\)[+\|-],\1!,e<cr>:noh<cr>
"============================================================================================================
"						SHELL BEÁLLíTÁSOK	
"============================================================================================================
	"Mindig a PowerShell legyen a shell
	"	set shell=powershell
	"Ez mgé nem teljesen egyértelmû, mit csinál, de biztos jó lesz
	"	set shellcmdflag=-c
	"Help ehhez:
		"http://juliankay.com/development/setting-up-vim-to-work-with-powershell/
"============================================================================================================
"						GÉPSPECIFIKUS BEÁLLÍTÁSOK
"============================================================================================================
	"set viewdir=d:\Dropbox\VIMDropbox\viewdir\
